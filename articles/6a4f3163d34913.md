---
title: "【React基礎】公式ドキュメントから学ぶ「コンポーネント」の本質"
emoji: "🔰"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["React"]
published: true
---
# 1.はじめに
最近、開発を進める中でふと自分が使っている技術のことちゃんと把握できてる？という疑問を感じたので、公式ドキュメントを1から読み返してみます。
（複数シリーズを想定しています。）

# 2.コンポーネントとは何か？
そもそも、Reactを始めると必ず聞くであろうコンポーネントとは何なのでしょうか？
よくある例である車を例えとして考えてみましょう。

![alt text](/images/【React基礎】公式ドキュメントから学ぶ「コンポーネント」の本質.png)

上記画像のように(雑で申し訳ないです...)車はタイヤやフロントガラス、ボディなど様々なパーツから構成されています。
車がひとつながりでできているわけではありませんよね？

これと同様にReactにおいてもUIを構成する要素を`コンポーネント`という部品に分割して開発を進めていきます。

もし、コンポーネントという単位で区切らない場合、1つのファイルにいろいろなものを詰め込もうとすることでコードが肥大化し、可読性の低下や保守性の低下を招いてしまいます。
（イメージとしては、1つのファイルにHTML、CSS、JavaScriptをすべて詰め込んでいる状態を想像してみてください。）

保守性の低下がなぜよくないのか。

それはとても単純で、後々の修正が人にとっても、AIにとってもとても難しくなるからです。

おそらく今の時代にAIを使わない開発は考えられないと思います。
それをもってしても、どこのファイルにどのような役割を持たせるという設計をしっかり行わないと手直しをするときも、AIを用いて機能実装を行うときも、より多くの時間がかかったり、意図しないバグなどを招く原因につながります。

ですので、コンポーネントとして分割できるところは分割して、保守性の高いコードを目指しましょう。
(私自身も最近ようやく保守性の高いコードを意識して開発を進めるようになりました。)


# 3.コンポーネントを作る3つのステップ
コンポーネントを作るステップとしてはとても簡単です。

1. コンポーネントのファイルを作成する
2. コンポーネントのファイルにマークアップを返す関数を作成する
3. コンポーネントのファイルをエクスポートする

具体的なコード例としては以下の通りになります。

```ts:User.tsx
interface UserProps {
    id: number;
    name: string;
    age: number;
}

export default User(props: UserProps) {
    <div>
        <h1>{props.name}</h1>
        <p>{props.id}</p>
        <p>{props.age}</p>
    </div>
}
```

注意してほしいポイントとしては以下の2つです。

- 拡張子は`ts`ではなく、`tsx`にする
- 関数名の先頭は必ず大文字にする

拡張子を`tsx`にすると、ReactがJSXと呼ばれるマークアップを返す関数だ！と認識するようになります。

また、関数名の先頭を大文字にすることで、JSXがHTMLのタグとコンポーネントを区別できるようにするためです。

:::details exportについて
TypeScriptにおいて、`export`構文を用いることで関数や変数などを他のファイルでも利用することができます。

しかし、`export`構文には2種類あり、それぞれ使い方が異なります。

1. `export`
別名名前付きエクスポートとも呼ばれ、複数の関数や変数をエクスポートすることができます。

インポートの際は下記のような書き方になります。

```ts
import { a, b } from "./file"
```

名前の変更は`as`を使うことで別のエイリアスに変えられます。

```ts
import { a as b } from "./file"
```

2. `export default`
こちらは別名デフォルトエクスポートと呼ばれ、ファイル内でたった1つの関数や変数をエクスポートすることができます。（逆に言うと、1つだけに限定することが可能です。）

また、`import`構文で呼び出す際、好きな名前にすることが可能です。

```ts
import sukinanamae from "./file"
```
:::

# 4.コンポーネントを使ってみる
試しにコンポーネントを定義して使ってみましょう。

```ts:Image.tsx
export default Image() {
    return (
        <img
            src="/image.jpg"
            alt="text"
        />
    )
}
```

```ts:Gallery.tsx
import Profile from "./Image" // export defaultにより、好きな名前でのインポートが可能なため、ここではProfileと名付けている

export default Gallery() {
    return (
        <section>
            <Profile />
            <h1>User</h1>
        </section>
    )
}
```

# 5.まとめ
コンポーネントとして分割してファイルの粒度を細かくすることで以下のメリットを享受することができるようになります。

- 修正範囲が明確になる。
- 何度も同じコードを書かなくて済む
- 複雑な画面を小さい`部品`として構成することができるようになる

ぜひ、皆さんもコンポーネントとして分割して保守性の高いコードを目指しましょう！

# 6.参考
- [初めてのコンポーネント](https://ja.react.dev/learn/your-first-component)
