---
title: "Viteのresolve.aliasは動くのに、TypeScriptで型チェックが通らない理由"
emoji: "🧩"
type: "tech"
topics: ["vite", "typescript", "frontend"]
published: true
---

## はじめに

Vite + TypeScript を使って開発していると、次のような経験をしたことはないでしょうか。

- ブラウザでは普通に動く  
- しかし VS Code には赤線が出る  
- `Cannot find module '@/xxx'` とエラーが表示される  

本記事では、

- `vite.config.ts` における `resolve.alias` とは何か  
- なぜ **Vite では動くのに TypeScript の型チェックが通らないのか**  
- 正しい設定方法と考え方  

について、つまずきやすいポイントを整理しながら解説します。

---

## resolve.alias とは何か？

`resolve.alias` は、**import パスに別名（エイリアス）を定義するための設定**です。

### よくある問題

```ts
import Button from '../../../components/Button'
```

- 階層が深くて読みにくい  
- ファイル移動に弱い  
- import 元が直感的に分かりづらい  

こうした問題を解決するために使われるのが `resolve.alias` です。

---

## resolve.alias を使うとどうなるか

### vite.config.ts の設定例

```ts
import { defineConfig } from 'vite'
import path from 'path'

export default defineConfig({
  resolve: {
    alias: {
      '@': path.resolve(__dirname, 'src'),
    },
  },
})
```

### import 側のコード

```ts
import Button from '@/components/Button'
```

`@` が `src` を指すようになり、import が短く、意味的にも分かりやすくなります。

---

## 「型チェックが通らない」とはどういう意味か？

ここで言う **「型チェックが通らない」** とは、

> **Vite では実行できるのに、TypeScript がエラーを出す状態**

を指します。

---

## 実際に起きる現象

`resolve.alias` を Vite 側だけに定義した場合、次のような状態になります。

| 環境 | 結果 |
|---|---|
| Vite 開発サーバ | ✅ 正常に動作 |
| ブラウザ表示 | ✅ 問題なし |
| TypeScript / VS Code | ❌ エラー |

VS Code では次のようなエラーが表示されます。

```txt
Cannot find module '@/components/Button' or its corresponding type declarations.
```

---

## なぜこの問題が起きるのか？

理由はシンプルです。

### Vite と TypeScript は設定を共有していない

- Vite は `vite.config.ts` を読む  
- TypeScript は `tsconfig.json` しか読まない  

つまり、TypeScript は `resolve.alias` の存在を **一切知らない** のです。

---

## 型チェックとは何をしているのか？

TypeScript の型チェックでは、主に次のことを確認しています。

1. import 先のファイルが存在するか  
2. そのモジュールがどんな型を export しているか  
3. 型の整合性が取れているか  

今回の問題は、**1. import 先の解決** の段階で失敗しています。

---

## 正しい解決方法

### tsconfig.json にも alias を定義する

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  }
}
```

これにより TypeScript も、

> `@/xxx` は `src/xxx` を指している

と理解できるようになり、型チェックが通るようになります。

---

## よくある勘違い

| 設定状況 | 実行 | 型チェック |
|---|---|---|
| Vite のみ alias 定義 | ✅ | ❌ |
| tsconfig のみ paths 定義 | ❌ | ✅ |
| 両方定義 | ✅ | ✅ |

---

## なぜ Vite だけでは完結しないのか？

Vite は内部で **:contentReference[oaicite:0]{index=0}** を使ってビルドしていますが、  
TypeScript の型チェックはビルド処理とは独立しています。

そのため、

- ビルドツールの設定  
- 型システムの設定  

は、設計上 **別々に管理する必要がある** のです。

---

## 実務的なベストプラクティス

- alias は必ず **Vite と TypeScript の両方に定義**する  
- `@` → `src` のように、シンプルなルールで統一する  
- プロジェクトが大きくなったら `tsconfig.base.json` を用意する  

---

## おわりに

`resolve.alias` は非常に便利ですが、

> 「動くのにエディタがエラーを出す」

という状況を生みやすい設定でもあります。

なぜそうなるのか、どこに設定を書くべきかを理解しておくことで、  
今後同じ問題に悩まされることはほぼなくなるはずです。