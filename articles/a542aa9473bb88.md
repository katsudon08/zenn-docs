---
title: "【React基礎】デフォルトエクスポートと名前付きエクスポートの使い分け"
emoji: "📦"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["React", "初心者", "フロントエンド"]
published: true
---
# 1.はじめに
1つのファイルにすべてのコンポーネントを書くと、コードが長くなりメンテナンスが困難になってしまいます。

1つのファイルには1つのコンポーネントを定義することで、コードの可読性を高め、保守性を高めることができます。

今回は、コンポーネントを分割してファイルの粒度を細かくすることで、保守性を高める方法をお勉強します！

:::message
この記事は前回の[【React基礎】公式ドキュメントから学ぶ「コンポーネント」の本質](https://zenn.dev/katsudon08/articles/6a4f3163d34913)の続きです。
:::

# 2.コンポーネント分割の3ステップ
コンポーネントを分割して読み込む順番としては下記の3つです。

1. **ファイルを作る：** コンポーネントを入れるための新しいJSXファイルを作成する
2. **エクスポートする：** 作成したファイルからコンポーネントを外に出す。
3. **インポートする：** 使いたいファイル別のコンポーネントを取り込む。

たったこれだけです！
これをいくつも行っていくことで、巨大なコンポーネントを複数の小さなコンポーネントに分割していきます。

具体例としては、以下のようになります。

1. **ファイルを作る**
まずは、1つのファイルにすべてが書かれている「ちょっと窮屈な」状態を示します。

```ts:App.tsx
function Profile() {
    return (
        <img
            src="/image.jpg"
            alt="text"
        />
    );
}

export default function Gallery() {
    return (
        <section>
            <h1>これはギャラリーです</h1>
            <Profile />
            <Profile />
            <Profile />
        </section>
    );
}
```

2. **エクスポートする**
ここから、`Profile`を別ファイルに切り出していきます。

```ts:Profile.tsx
export default function() {
    return (
        <img
            src="/image.jpg"
            alt="text"
        />
    );
}
```

3. **インポートする**
元の`App.tsx`で、外に出した`Profile`を読み込みます。

```ts:App.tsx
import Profile from './Profile';

export default function Gallery() {
    return (
        <section>
            <h1>これはギャラリーです</h1>
            {/* 別のファイルから来たコンポーネントをそのまま使える！ */}
            <Profile />
            <Profile />
            <Profile />
        </section>
    )
}
```

# 3.デフォルトエクスポート（デフォルトエクスポート）
ファイルを分割する際に最もよく使われるのがこの`デフォルトエクスポート`です。

デフォルトエクスポートは、そのファイルから「**1つだけ**」エクスポートできる特別な方法です。
「このファイルは、このコンポーネントのためのファイルです！」とコードだけで表現できます。

以下、具体例です。

```ts:Profile.tsx
export default Profile() {
    return (
        <img
            src="/image.jpg"
            alt="text"
        />
    );
}
```

または下記のようにも書けます。

```ts:Profile.tsx
function Profile() {
    return (
        <img
            src="/image.jpg"
            alt="text"
        />
    );
}

// このファイルをimportすると、自動的にProfileが選ばれるようになる。
export default Profile;
```

デフォルトエクスポートされたものを読み込むときは、**波括弧`{}` を使いません。**

```ts
import Profile from './Profile';
```

また、デフォルトエクスポートはインポートする側で**自由な名前を付けられる**のが特徴です。

```ts
// ファイルの中ではProfileという名前だけど、ここではMyAvatarとして使う
import MyAvatar from './Profile';
```

# 4.名前付きエクスポート（名前付きエクスポート）
デフォルトエクスポートが「1つのファイルの主役」を決めるものだったのに対し、名前付きエクスポートは「**1つのファイルで複数のパーツ（部品）を送り出す**」ための手法です。

「文房具セット」や「工具箱」の中から、必要なペンやドライバーを指名して取り出すようなイメージ。

![【React基礎】デフォルトエクスポートと名前付きエクスポートの使い分け](/images/【React基礎】デフォルトエクスポートと名前付きエクスポートの使い分け.png)

以下、具体例です。
各コンポーネント定義の前に、直接`export`を記述します。

```ts:Buttons.tsx
export function PrimaryButton() {
    return <button className="primary">決定</button>;
}

export function SecondaryButton() {
    return <button className="secondary">キャンセル</button>;
}
```

インポートは下記のように行います。
デフォルトエクスポートとは違い、**必ず波括弧`{}`で囲まなければいけません**。

```ts
import { PrimaryButton, SecondaryButton } from "./Buttons";
```

また、名前付きエクスポートのもう一つの特徴として、vscodeなどのエディタでインポートする際に、補完が働くということも覚えておくと便利です！

:::message alert
デフォルトエクスポートとは違い、名前付きエクスポートは**エクスポートの名前とインポートの名前を一致させなければなりません。**

もし、他の名前を使いたければ`as`構文を用いてエイリアスとして、他の名前を使用できるようにします。

以下は先ほどの例を用いた具体例です。

```ts
import { PrimaryButton as Button } from "./Buttons";
```
:::

# 5.【比較】どちらを使うべきか？
どちらか一方しか使わないのではなく、状況に合わせて適切に判断するべきだと私は思います。

基本的には以下のルールで分けるべきです。

- **デフォルトエクスポート**を使うとき
  - 「1ファイル＝1コンポーネント」の責務を持たせるとき
  - そのファイルが具体的な役割を持っているとき（例：`Profile`, `Header`など）


- **名前付きエクスポート**を使うとき
  - 1つのファイルで複数の部品（ボタン、アイコン、定数など）を送り出すとき
  - 「便利な関数集」や「UIをひとまとめにしたもの」のようなファイルを作る時

今まで明記してきませんでしたが、デフォルトエクスポートと名前付きエクスポートは同じファイル内で一緒に使うことができます。
例えば`メインのコンポーネント`と`それに付随する設定データ`を一緒に書く際などに使われます。

```ts
import Profile from "./Profile";

export const GALLERY_TITLE = "世界の偉人たち";

export default function Gallery() {
    return (
        <section>
            <h1>{GALLERY_TITLE}</h1>
            <Profile />
            <Profile />
            <Profile />
        </section>
    );
}
```

インポート側では、下記のようになります。

```ts
import Gallery, { GALLERY_TITLE } from "./Gallery";
```

# 6.まとめ
今回はReact開発において、欠かせないコンポーネントの**エクスポート**と**インポート**について解説しました。

今回のポイントとしては、以下の3つです。

- ファイル分割をすることで、コードの見通しがよくなる、再利用しやすくなるなどのメリットを享受できる。
- デフォルトエクスポートはそのファイルの「メインのコンポーネント」をエクスポートする。**好きな名前**でインポートできて、**波括弧`{}`は不要**。
- 名前付きエクスポートは、1つのファイルで複数の「パーツ」をエクスポートする。**エクスポートと同じ名前**でインポートする必要があり、**波括弧`{}`が必須**。

とりあえず、迷ったら最初のうちは1つのファイルに1つのコンポーネントを書き、それをデフォルトエクスポートするのがおすすめです！

# 7.参考
- [コンポーネントのインポートとエクスポート](https://ja.react.dev/learn/importing-and-exporting-components)